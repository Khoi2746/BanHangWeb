<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" th:href="@{/image/css/Cart.css}">
    <title>Cart</title>
</head>
<body>
    <header>
        <div class="top-bar-wrapper">
            <div class="inner-content top-bar-content">
                <div class="jordan-logo">
                    <img src="image/jordanIcon.png" alt="Jordan">
                </div>
                <div class="top-right-links">
                    <th:block th:if="${session.loggedInUser != null and session.loggedInUser.roleId == 1}">
                            <a href="http://localhost:8080/admin/user/management">Quản Lý Người Dùng</a>
                    </th:block>|
                    <a href="#">Find a Store</a>
                    <span>|</span>
                    <a href="#">Help</a>
                    <span>|</span>

                    <th:block th:if="${session.loggedInUser == null}">
                        <a href="http://localhost:8080/login">Login</a>
                        <span>|</span>
                        <a th:href="@{/checkMail}">Sign In</a>
                    </th:block>

                    <th:block th:unless="${session.loggedInUser == null}">
                        <div class="user-dropdown">
                            <div class="user-name-wrapper">
                                Hi, <span th:text="${session.loggedInUser.firstName}">Member</span>
                                <i class="fa-solid fa-chevron-down arrow-icon"></i>
                            </div>
                            <div class="dropdown-content">
                                <a th:href="@{/profile}">Profile Detail</a>
                                <hr style="border: 0; border-top: 1px solid #f0f0f0; margin: 0;">
                                <a th:href="@{/change-password}">Change Password</a>
                                <hr style="border: 0; border-top: 1px solid #f0f0f0; margin: 0;">
                                <a th:href="@{/logout}" style="color: #d43f3a !important;">Log Out</a>
                            </div>
                        </div>
                    </th:block>
                </div>
            </div>
        </div>

        <nav class="main-nav-wrapper">
            <div class="inner-content">
                <a href="http://localhost:8080/home" class="nike-logo">
                    <img src="image/icon.png" alt="Nike">
                </a>

                <div class="nav-links">

                    <div class="nav-item">
                        <a href="#">New & Featured</a>
                        <div class="dropdown-menu">
                            <div class="dropdown-inner">
                                <div class="dropdown-column">
                                    <h3>Featured</h3>
                                    <ul>
                                        <li><a href="http://localhost:8080/new-arrivals">New Arrivals</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="nav-backdrop"></div>

                <div class="nav-actions">
                    <div class="search-container">
                        <i class="fa-solid fa-magnifying-glass search-icon-btn"></i>
                        <input type="text" placeholder="Search">
                    </div>
                    <a href="http://localhost:8080/favorites" class="action-icon"><i
                            class="fa-regular fa-heart"></i></a>
                    <a href="http://localhost:8080/cart" class="action-icon"><i
                            class="fa-solid fa-bag-shopping"></i></a>
                </div>
            </div>
        </nav>

        <div class="promo-bar-wrapper">
            <div class="inner-content promo-content" style="display: block;">
                <div class="promo-text">Free Standard Delivery & 30-Day Free Returns</div>
                <div class="promo-subtext">
                    <a href="#">Join Now</a>
                    <a href="#">View Details</a>
                </div>
            </div>
        </div>
    </header>
    <!-- =================================================================== -->
    <!-- Search Overlay -->
    <div class="search-overlay" id="searchOverlay">
        <div class="search-overlay-content">
            <div class="search-top-bar">
                <a href="#" class="overlay-logo">
                    <img src="image/icon.png" alt="Nike">
                </a>

                <div class="big-search-container">
                    <i class="fa-solid fa-magnifying-glass search-icon-big"></i>
                    <input type="text" placeholder="Search" id="bigSearchInput">
                </div>

                <button class="btn-cancel" onclick="closeSearch()">Cancel</button>
            </div>

            <div class="search-suggestions">
                <p class="suggestion-title">Popular Search Terms</p>
                <div class="tags-container">
                    <a href="#" class="search-tag">luka 5</a>
                    <a href="#" class="search-tag">air force 1</a>
                    <a href="#" class="search-tag">jordan</a>
                    <a href="#" class="search-tag">air max</a>
                    <a href="#" class="search-tag">basketball shoes</a>
                    <a href="#" class="search-tag">nike tech</a>
                </div>
            </div>
        </div>
        <div class="overlay-backdrop" onclick="closeSearch()"></div>
    </div>

    <!-- =================================================================== -->
    <div class="container">
        <div class="cart-wrapper">
            
            <div class="cart-left">
    <h2>Bag</h2>

    <div th:if="${#lists.isEmpty(cartItems)}">
        <p class="empty-msg">There are no items in your bag.</p>
        <a href="/home" style="text-decoration: underline;">Shop Now</a>
    </div>

    <div th:each="item : ${cartItems}" class="cart-item">
        
        <div class="item-img">
            <img th:src="@{${item.product.imageUrl}}" alt="Product Image">
        </div>

        <div class="item-details">
            <div class="item-name" th:text="${item.product.name}">Tên sản phẩm</div>
            <div class="item-cat" th:text="${item.product.category}">Danh mục</div>
            
            <div class="item-cat" style="margin-top: 5px;">
                Quantity: <span th:text="${item.quantity}">1</span>
            </div>

            <div class="item-actions" style="display: flex; gap: 15px; margin-top: 10px;">
                <form th:action="@{/favorites/toggle}" method="post">
                    <input type="hidden" name="productId" th:value="${item.product.id}" />
                    <button type="submit" style="background:none; border:none; cursor:pointer; font-size:14px; color: #757575;">
                        <i class="fa-regular fa-heart"></i> Favourite
                    </button>
                </form>

                <form th:action="@{/cart/remove}" method="post">
                    <input type="hidden" name="cartItemId" th:value="${item.id}" />
                    <button type="submit" style="background:none; border:none; cursor:pointer; font-size:14px; color: #757575;">
                        <i class="fa-regular fa-trash-can"></i> Remove
                    </button>
                </form>
            </div>
        </div>

        <div class="item-price" th:text="${#numbers.formatDecimal(item.product.price * item.quantity, 0, 'POINT', 0, 'COMMA')} + '₫'">
            Giá tiền
        </div>
    </div>
    
    </div>

            <div class="cart-right">
                <h2>Summary</h2>
                <div class="summary-box">
                    <div class="summary-row">
                        <span>Subtotal</span>
                        <span th:text="${#numbers.formatDecimal(subtotal, 0, 'POINT', 0, 'COMMA')} + '₫'">0₫</span>
                    </div>
                    <div class="summary-row">
                        <span>Estimated Delivery & Handling</span>
                        <span>Free</span>
                    </div>
                    
                    <div class="summary-row total">
                        <span>Total</span>
                        <span th:text="${#numbers.formatDecimal(total, 0, 'POINT', 0, 'COMMA')} + '₫'">0₫</span>
                    </div>

                    <button class="btn-checkout" th:disabled="${#lists.isEmpty(cartItems)}">Member Checkout</button>
                </div>
            </div>
        </div>

        <div class="recommend-section">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <h2>You Might Also Like</h2>
                <div>
                    <i class="fa-solid fa-chevron-left" style="padding: 10px; background: #f5f5f5; border-radius: 50%; cursor: pointer;"></i>
                    <i class="fa-solid fa-chevron-right" style="padding: 10px; background: #e5e5e5; border-radius: 50%; cursor: pointer;"></i>
                </div>
            </div>
            
            <div class="scroll-container">
                <div class="rec-card">
                    <div class="rec-img"><img src="https://static.nike.com/a/images/c_limit,w_592,f_auto/t_product_v1/u_126ab356-44d8-4a06-89b4-fcdcc8df0245,c_scale,fl_relative,w_1.0,h_1.0,fl_layer_apply/07548590-7d04-4648-944f-c38f4d54622b/air-jordan-1-mid-shoes-X5pM09.png" alt=""></div>
                    <div class="item-name">Air Jordan 1 Mid</div>
                    <div class="item-cat">Men's Shoes</div>
                    <div class="item-price">3,200,000₫</div>
                </div>
                <div class="rec-card">
                    <div class="rec-img"><img src="https://static.nike.com/a/images/c_limit,w_592,f_auto/t_product_v1/e6da41fa-756f-4322-ac69-7988019a28c5/air-force-1-07-shoes-WrLlWX.png" alt=""></div>
                    <div class="item-name">Nike Air Force 1 '07</div>
                    <div class="item-cat">Men's Shoes</div>
                    <div class="item-price">3,519,000₫</div>
                </div>
                <div class="rec-card">
                    <div class="rec-img"><img src="https://static.nike.com/a/images/c_limit,w_592,f_auto/t_product_v1/25697666-4148-4228-a379-3d1964263155/dunk-low-retro-shoe-66RGqF.png" alt=""></div>
                    <div class="item-name">Nike Dunk Low Retro</div>
                    <div class="item-cat">Men's Shoes</div>
                    <div class="item-price">2,950,000₫</div>
                </div>
                 <div class="rec-card">
                    <div class="rec-img"><img src="https://static.nike.com/a/images/c_limit,w_592,f_auto/t_product_v1/f153b6e2-2a62-4467-9372-20c3773950c4/air-max-90-shoes-kRsBnD.png" alt=""></div>
                    <div class="item-name">Nike Air Max 90</div>
                    <div class="item-cat">Men's Shoes</div>
                    <div class="item-price">3,800,000₫</div>
                </div>
            </div>
        </div>
    </div>
    <!-- ======================================================================================================================================= -->


    <footer class="nike-footer">
    <div class="footer-container">

        <!-- CỘT 1 -->
        <div class="footer-column">
            <h4>Find a Store</h4>
            <ul>
                <li><a href="#">Become a Member</a></li>
                <li><a href="#">Sign Up for Email</a></li>
                <li><a href="#">Send Us Feedback</a></li>
                <li><a href="#">Student Discounts</a></li>
            </ul>
        </div>

        <!-- CỘT 2 -->
        <div class="footer-column">
            <h4>Get Help</h4>
            <ul>
                <li><a href="#">Order Status</a></li>
                <li><a href="#">Delivery</a></li>
                <li><a href="#">Returns</a></li>
                <li><a href="#">Payment Options</a></li>
                <li><a href="#">Contact Us</a></li>
            </ul>
        </div>

        <!-- CỘT 3 -->
        <div class="footer-column">
            <h4>About Nike</h4>
            <ul>
                <li><a href="#">News</a></li>
                <li><a href="#">Careers</a></li>
                <li><a href="#">Investors</a></li>
                <li><a href="#">Sustainability</a></li>
            </ul>
        </div>

        <!-- CỘT 4 -->
        <div class="footer-column">
            <h4>Social</h4>
            <div class="social-icons">
                <a href="#"><i class="fa-brands fa-facebook-f"></i></a>
                <a href="#"><i class="fa-brands fa-twitter"></i></a>
                <a href="#"><i class="fa-brands fa-instagram"></i></a>
                <a href="#"><i class="fa-brands fa-youtube"></i></a>
            </div>
        </div>

    </div>

    <div class="footer-bottom">
        <span>© 2026 Nike, Inc. All Rights Reserved</span>
        <div class="footer-links">
            <a href="#">Guides</a>
            <a href="#">Terms of Sale</a>
            <a href="#">Terms of Use</a>
            <a href="#">Privacy Policy</a>
        </div>
    </div>
</footer>
    <script th:src="@{/image/js/Cart.js}"></script>
</body>
</html>